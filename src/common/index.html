<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KeepRolling</title>
    <link rel="icon" type="image/png" href="../assets/images/KeepRolling_Black.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Locomotive Scroll CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/locomotive-scroll@4.1.4/dist/locomotive-scroll.min.css">
    <link rel="stylesheet" href="../assets/css/homepage.css">
    <style>
        #starfield {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -1;
            pointer-events: none;
            opacity: 0.7;
            transition: opacity 0.5s ease;
        }

        #starfield.hidden {
            opacity: 0;
        }

        .hero-banner {
            position: relative;
            overflow: hidden;
        }

        /* Enhanced Navbar Styles */
        .navbar {
            position: fixed;
            top: 0;
            right: 0;
            left: 64px;
            height: 80px;
            background: linear-gradient(90deg, 
                rgba(20, 20, 41, 0.95) 0%, 
                rgba(37, 29, 86, 0.95) 100%
            );
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 32px;
        }

        .nav-link {
            position: relative;
            padding: 8px 16px;
            transition: all 0.3s ease;
            border-radius: 8px;
            text-decoration: none;
            color: var(--text-secondary);
        }

        .nav-link:hover {
            color: var(--text-primary);
            background: rgba(140, 61, 206, 0.1);
            transform: translateY(-1px);
            box-shadow: 0 4px 15px rgba(140, 61, 206, 0.1);
        }

        .nav-link.active {
            color: var(--text-primary);
            background: rgba(140, 61, 206, 0.15);
            box-shadow: 0 4px 15px rgba(140, 61, 206, 0.1);
        }

        /* Remove all text decorations for links */
        a {
            text-decoration: none;
        }

        .navbar-brand {
            position: relative;
            overflow: hidden;
        }

        .logo-container {
            transition: transform 0.3s var(--transition-bounce);
        }

        .logo-container:hover {
            transform: scale(1.05);
        }

        .logo-container::before {
            content: '';
            position: absolute;
            top: 50%;
            left: -100%;
            width: 40px;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.2),
                transparent
            );
            transform: translateY(-50%) skewX(-25deg);
            transition: left 0.5s ease;
        }

        .logo-container:hover::before {
            left: 200%;
        }

        /* Enhanced User Account Styles */
        .user-account {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .balance-display {
            background: rgba(255, 255, 255, 0.05);
            padding: 8px 16px;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .balance-display:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-1px);
            border-color: rgba(140, 61, 206, 0.3);
        }

        .balance-display i {
            color: var(--gold);
            transition: transform 0.3s ease;
        }

        .balance-display:hover i {
            transform: rotate(15deg);
        }

        .deposit-btn {
            background: linear-gradient(45deg, var(--gold), var(--gold-hover));
            padding: 8px 20px;
            border-radius: 12px;
            font-weight: 600;
            transition: all 0.3s var(--transition-bounce);
            border: 1px solid rgba(255, 215, 0, 0.3);
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.15);
        }

        .deposit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(255, 215, 0, 0.25);
            background: linear-gradient(45deg, var(--gold-hover), var(--gold));
        }

        /* Enhanced Auth Buttons Styles */
        .auth-buttons {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .btn {
            position: relative;
            padding: 10px 24px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 15px;
            transition: all 0.3s var(--transition-bounce);
            overflow: hidden;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(
                90deg,
                transparent,
                rgba(255, 255, 255, 0.2),
                transparent
            );
            transition: left 0.5s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn-login {
            background: rgba(140, 61, 206, 0.1);
            color: var(--text-primary);
            border: 1px solid rgba(140, 61, 206, 0.3);
        }

        .btn-login:hover {
            background: rgba(140, 61, 206, 0.2);
            transform: translateY(-2px);
            border-color: var(--accent-purple);
            box-shadow: 0 4px 15px rgba(140, 61, 206, 0.2);
        }

        .btn-signup {
            background: linear-gradient(45deg, var(--accent-purple), var(--accent-purple-light));
            color: var(--text-primary);
            border: 1px solid rgba(140, 61, 206, 0.3);
            box-shadow: 0 4px 15px rgba(140, 61, 206, 0.2);
        }

        .btn-signup:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(140, 61, 206, 0.3);
            background: linear-gradient(45deg, var(--accent-purple-light), var(--accent-purple));
        }

        /* Add icons to buttons */
        .btn-login::after {
            content: '\f2f6';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            margin-left: 8px;
            transition: transform 0.3s ease;
        }

        .btn-signup::after {
            content: '\f234';
            font-family: 'Font Awesome 6 Free';
            font-weight: 900;
            margin-left: 8px;
            transition: transform 0.3s ease;
        }

        .btn:hover::after {
            transform: translateX(3px);
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .auth-buttons {
                gap: 12px;
            }

            .btn {
                padding: 8px 16px;
                font-size: 14px;
            }
        }

        /* Responsive Navbar Adjustments */
        @media (max-width: 1024px) {
            .navbar-nav {
                gap: 15px;
            }

            .nav-link {
                padding: 6px 12px;
                font-size: 14px;
            }
        }

        @media (max-width: 768px) {
            .navbar {
                padding: 0 16px;
            }

            .navbar-brand {
                margin-left: 60px;
            }

            .deposit-btn {
                padding: 6px 16px;
                font-size: 14px;
            }
        }

        .faq-section {
            padding: 4rem 2rem;
            background: rgba(255, 255, 255, 0.02);
        }

        .faq-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .section-title {
            text-align: center;
            color: var(--text-primary);
            font-size: 2.5rem;
            margin-bottom: 3rem;
        }

        .faq-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 3rem;
        }

        .faq-column, .legal-column {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 2rem;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .faq-column h3, .legal-column h3 {
            color: var(--text-primary);
            margin-bottom: 1.5rem;
            font-size: 1.5rem;
        }

        .faq-item, .legal-section {
            margin-bottom: 1.5rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .faq-item:last-child, .legal-section:last-child {
            border-bottom: none;
            padding-bottom: 0;
        }

        .faq-item h4, .legal-section h4 {
            color: var(--accent-purple);
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }

        .faq-item p, .legal-section p {
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .legal-link {
            color: var(--accent-purple);
            text-decoration: none;
            display: inline-block;
            margin-top: 0.5rem;
            transition: color 0.3s ease;
        }

        .legal-link:hover {
            color: var(--accent-purple-light);
        }

        @media (max-width: 768px) {
            .faq-grid {
                grid-template-columns: 1fr;
                gap: 2rem;
            }

            .section-title {
                font-size: 2rem;
            }
        }

        /* Add padding to main content to account for fixed navbar */
        .main-content {
            padding-top: 80px;
        }

        /* Game Description Animation Styles */
        .game-description {
            position: relative;
            padding: 2rem;
            transition: opacity 0.3s ease;
        }

        .game-description.fade-out {
            opacity: 0;
            transform: translateY(10px);
        }

        .game-description.fade-in {
            opacity: 1;
            transform: translateY(0);
            transition: opacity 0.4s ease, transform 0.4s ease;
        }

        .game-description h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            background: linear-gradient(45deg, var(--text-primary), var(--accent-purple));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.4s ease 0.2s, transform 0.4s ease 0.2s;
        }

        .game-description.fade-in h2 {
            opacity: 1;
            transform: translateY(0);
        }

        .game-description p {
            font-size: 1.1rem;
            line-height: 1.6;
            color: var(--text-secondary);
            margin-bottom: 2rem;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.4s ease 0.3s, transform 0.4s ease 0.3s;
        }

        .game-description.fade-in p {
            opacity: 1;
            transform: translateY(0);
        }

        .game-description .game-stats {
            display: flex;
            align-items: center;
            gap: 1rem;
            margin-bottom: 2rem;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.4s ease 0.4s, transform 0.4s ease 0.4s;
        }

        .game-description.fade-in .game-stats {
            opacity: 1;
            transform: translateY(0);
        }

        .game-description .max-win {
            font-size: 2rem;
            font-weight: bold;
            color: var(--gold);
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.3);
        }

        .game-description .max-win-label {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .game-description .play-now-btn {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.4s ease 0.5s, transform 0.4s ease 0.5s, all 0.3s ease;
        }

        .game-description.fade-in .play-now-btn {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body>
    <canvas id="starfield"></canvas>
    <div class="purple-orb orb-1"></div>
    <div class="purple-orb orb-2"></div>

    <nav class="navbar">
        <div class="navbar-brand">
            <a href="#" data-page="index.html" class="logo-container">
                <img src="../assets/images/KeepRolling_White.png" alt="KeepRolling" class="logo-image">
            </a>
        </div>
        <div class="navbar-nav">
            <a href="#hero" class="nav-link active" data-scroll-to="hero">Home</a>
            <a href="#facts" class="nav-link" data-scroll-to="facts">Benefits</a>
            <a href="#games" class="nav-link" data-scroll-to="games">Games</a>
            <a href="#faq" class="nav-link" data-scroll-to="faq">FAQ</a>
        </div>
        <!-- Auth UI - Shown when logged out -->
        <div class="auth-buttons" id="logged-out-ui">
            <a href="../pages/auth.html?mode=login" class="btn btn-login">Log In</a>
            <a href="../pages/auth.html?mode=register" class="btn btn-signup">Sign Up Free</a>
        </div>
        <!-- User Account - Shown when logged in -->
        <div class="user-account" id="logged-in-ui" style="display: none;">
            <div class="balance-display">
                <i class="fas fa-coins"></i>
                <span class="balance-amount">$0.00</span>
                <i class="fas fa-chevron-down"></i>
            </div>
            <a href="#" class="deposit-btn">Deposit</a>
            <div class="user-controls">
                <button class="icon-btn" data-tooltip="Search">
                    <i class="fas fa-search"></i>
                </button>
                <button class="icon-btn" data-tooltip="Rewards">
                    <i class="fas fa-gift"></i>
                </button>
                <button class="icon-btn" data-tooltip="Notifications">
                    <i class="fas fa-bell"></i>
                </button>
                <div class="user-profile">
    
                </div>
                <a href="#" class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>
            </div>
        </div>
    </nav>

    <aside class="sidebar">
        <!-- Add hamburger button -->
        <button class="hamburger-btn">

        </button>
        
        <nav class="sidebar-nav">
            <div class="nav-section">
                <a href="#" data-page="index.html" class="nav-item">
                    <i class="fas fa-home"></i>
                    <span class="nav-text">Home</span>
                </a>
                <a href="#" data-page="benefits.html" class="nav-item">
                    <i class="fas fa-gift"></i>
                    <span class="nav-text">Benefits</span>
                </a>
                <a href="#" data-page="library.html" class="nav-item">
                    <i class="fas fa-gamepad"></i>
                    <span class="nav-text">Games</span>
                </a>
                <a href="#" data-page="about.html" class="nav-item">
                    <i class="fas fa-info-circle"></i>
                    <span class="nav-text">About Us</span>
                </a>
            </div>

            <div class="nav-section">
                <a href="#" class="nav-item">
                    <i class="fas fa-chart-line"></i>
                    <span class="nav-text">Live RTP</span>
                </a>
                <a href="#" class="nav-item">
                    <i class="fas fa-user-friends"></i>
                    <span class="nav-text">Refer & Earn</span>
                </a>
            </div>

            <div class="nav-section">
                <a href="#" class="nav-item">
                    <i class="fas fa-headset"></i>
                    <span class="nav-text">Live Support</span>
                </a>
                <a href="#" class="nav-item">
                    <i class="fas fa-globe"></i>
                    <span class="nav-text">English</span>
                </a>
            </div>

        </nav>
    </aside>

    <main id="content" class="main-content" data-scroll-container>
        <!-- Hero Banner -->
        <section id="hero" class="hero-banner">
            <div class="hero-content">
                <h1 data-scroll data-scroll-speed="1" data-scroll-delay="0.1">Experience Risk-Free Gambling</h1>
                <p data-scroll data-scroll-speed="0.5" data-scroll-delay="0.2">Join our simulation platform and practice your strategies:</p>
                <div class="benefits-list">
                    <div class="benefit-item" data-scroll data-scroll-speed="0.7">
                        <i class="fas fa-coins" data-scroll data-scroll-speed="1.2"></i>
                        <span data-scroll data-scroll-speed="0.8">Virtual Currency to Practice</span>
                    </div>
                    <div class="benefit-item" data-scroll data-scroll-speed="0.7">
                        <i class="fas fa-shield-alt" data-scroll data-scroll-speed="1.2"></i>
                        <span data-scroll data-scroll-speed="0.8">Risk-Free Environment</span>
                    </div>
                    <div class="benefit-item" data-scroll data-scroll-speed="0.7">
                        <i class="fas fa-chart-line" data-scroll data-scroll-speed="1.2"></i>
                        <span data-scroll data-scroll-speed="0.8">Learn Game Strategies</span>
                    </div>
                    <div class="benefit-item" data-scroll data-scroll-speed="0.7">
                        <i class="fas fa-gamepad" data-scroll data-scroll-speed="1.2"></i>
                        <span data-scroll data-scroll-speed="0.8">Real Casino Experience</span>
                    </div>
                </div>
                <div class="cta-buttons animate fade-in-up delay-3">
                    <a href="../pages/auth.html?mode=register" class="cta-button signup-cta">
                        <span>Start Playing</span>
                    </a>
                    <div class="login-text">
                        Already have an account? 
                        <a href="../pages/auth.html?mode=login" class="login-link">Log In</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Facts Section -->
        <section id="facts" class="facts-section">
            <div class="facts-container">
                <div class="facts-grid">
                    <div class="fact-card">
                        <div class="fact-icon" data-scroll data-scroll-speed="0.5">
                            <i class="fas fa-trophy" data-scroll data-scroll-speed="1"></i>
                        </div>
                        <div class="fact-value" data-scroll data-scroll-speed="0.3">1,000,000</div>
                        <div class="fact-label" data-scroll data-scroll-speed="0.4">Virtual Credits</div>
                        <p class="fact-description" data-scroll data-scroll-speed="0.2">Practice with our virtual currency and experience the thrill without any risk</p>
                    </div>
                    
                    <div class="fact-card">
                        <div class="fact-icon" data-scroll data-scroll-speed="0.5">
                            <i class="fas fa-bolt" data-scroll data-scroll-speed="1"></i>
                        </div>
                        <div class="fact-value" data-scroll data-scroll-speed="0.3">1000x</div>
                        <div class="fact-label" data-scroll data-scroll-speed="0.4">Max Multiplier</div>
                        <p class="fact-description" data-scroll data-scroll-speed="0.2">Test different strategies with high multipliers in a safe environment</p>
                    </div>
                    
                    <div class="fact-card">
                        <div class="fact-icon" data-scroll data-scroll-speed="0.5">
                            <i class="fas fa-users" data-scroll data-scroll-speed="1"></i>
                        </div>
                        <div class="fact-value" data-scroll data-scroll-speed="0.3">1M+</div>
                        <div class="fact-label" data-scroll data-scroll-speed="0.4">Practice Games</div>
                        <p class="fact-description" data-scroll data-scroll-speed="0.2">Join thousands of players learning and practicing casino games</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Benefits Section -->
        <section class="benefits-section">
            <div class="benefits-container">
                <div class="benefits-header">
                    <h2 class="benefits-title" data-scroll data-scroll-speed="0.5">Why Choose KeepRolling Simulator</h2>
                    <p class="benefits-subtitle" data-scroll data-scroll-speed="0.3">Perfect your gaming strategies in a risk-free environment</p>
                </div>
                
                <div class="benefits-grid">
                    <div class="benefit-card">
                        <div class="benefit-icon" data-scroll data-scroll-speed="0.5">
                            <i class="fas fa-shield-alt" data-scroll data-scroll-speed="1"></i>
                        </div>
                        <div class="benefit-content">
                            <h3 class="benefit-title" data-scroll data-scroll-speed="0.4">Safe Practice Environment</h3>
                            <p class="benefit-text" data-scroll data-scroll-speed="0.2">Learn and practice casino games without the risk of losing real money</p>
                        </div>
                    </div>
                    
                    <div class="benefit-card">
                        <div class="benefit-icon" data-scroll data-scroll-speed="0.5">
                            <i class="fas fa-graduation-cap" data-scroll data-scroll-speed="1"></i>
                        </div>
                        <div class="benefit-content">
                            <h3 class="benefit-title" data-scroll data-scroll-speed="0.4">Learn Strategies</h3>
                            <p class="benefit-text" data-scroll data-scroll-speed="0.2">Develop and test your gaming strategies with virtual currency</p>
                        </div>
                    </div>
                    
                    <div class="benefit-card">
                        <div class="benefit-icon" data-scroll data-scroll-speed="0.5">
                            <i class="fas fa-chart-bar" data-scroll data-scroll-speed="1"></i>
                        </div>
                        <div class="benefit-content">
                            <h3 class="benefit-title" data-scroll data-scroll-speed="0.4">Track Progress</h3>
                            <p class="benefit-text" data-scroll data-scroll-speed="0.2">Monitor your performance and improve your gaming skills over time</p>
                        </div>
                    </div>
                    
                    <div class="benefit-card">
                        <div class="benefit-icon" data-scroll data-scroll-speed="0.5">
                            <i class="fas fa-gamepad" data-scroll data-scroll-speed="1"></i>
                        </div>
                        <div class="benefit-content">
                            <h3 class="benefit-title" data-scroll data-scroll-speed="0.4">Realistic Experience</h3>
                            <p class="benefit-text" data-scroll data-scroll-speed="0.2">Enjoy the authentic casino atmosphere without financial pressure</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="games" class="game-banner scroll-fade-up">
            <div class="game-banner-container">
            <div class="carousel3d">
                <div id="carousel"></div>
            
                    </div>
                    <div class="game-description">
                        
                </div>
            </div>
        </section>

        <!-- Add FAQ Section -->
        <section id="faq" class="faq-section">
            <div class="faq-container">
                <h2 class="section-title" data-scroll data-scroll-speed="0.5">FAQ & Rechtliches</h2>
                
                <div class="faq-grid">
                    <!-- FAQ Column -->
                    <div class="faq-column">
                        <h3>Häufig gestellte Fragen</h3>
                        <div class="faq-item" data-scroll data-scroll-speed="0.3">
                            <h4>Was ist KeepRolling?</h4>
                            <p>KeepRolling ist eine Simulations-Plattform für Casino-Spiele, die es Ihnen ermöglicht, ohne finanzielles Risiko zu spielen und Strategien zu entwickeln.</p>
                        </div>
                        <div class="faq-item" data-scroll data-scroll-speed="0.3">
                            <h4>Ist das Spielen kostenlos?</h4>
                            <p>Ja, alle Spiele sind komplett kostenlos. Sie spielen mit virtuellem Geld ohne echtes Geld zu riskieren.</p>
                        </div>
                        <div class="faq-item" data-scroll data-scroll-speed="0.3">
                            <h4>Wie funktioniert das Guthaben-System?</h4>
                            <p>Sie erhalten regelmäßig kostenloses virtuelles Guthaben zum Üben und Spielen.</p>
                        </div>
                    </div>

                    <!-- Legal Column -->
                    <div class="legal-column">
                        <h3>Rechtliche Informationen</h3>
                        <div class="legal-section" data-scroll data-scroll-speed="0.3">
                            <h4>Impressum</h4>
                            <p>KeepRolling GmbH<br>
                            Musterstraße 123<br>
                            12345 Musterstadt<br>
                            Schweiz</p>
                            <p>Email: info@keeprolling.ch<br>
                            Tel: +41 123 456 789</p>
                        </div>
                        <div class="legal-section" data-scroll data-scroll-speed="0.3">
                            <h4>Datenschutz</h4>
                            <p>Wir nehmen den Schutz Ihrer persönlichen Daten sehr ernst. Alle Informationen werden verschlüsselt übertragen und sicher gespeichert.</p>
                            <a href="#" class="legal-link">Vollständige Datenschutzerklärung</a>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Scripts -->
    <script src="../games/Mines/mines.js"></script>
    <script src="../games/Towers/towers.js"></script>
    <script src="../assets/js/carousel.js"></script>
    <!-- Locomotive Scroll JS -->
    <script src="https://cdn.jsdelivr.net/npm/locomotive-scroll@4.1.4/dist/locomotive-scroll.min.js"></script>
    <script>
        // Locomotive Scroll Initialization
        let locomotiveScroll;
        
        function initLocomotiveScroll() {
            if (locomotiveScroll) locomotiveScroll.destroy();
            
            locomotiveScroll = new LocomotiveScroll({
                el: document.querySelector('[data-scroll-container]'),
                smooth: true,
                smoothMobile: true,
                multiplier: 1,
                lerp: 0.1
            });

            // Initialize starfield after Locomotive Scroll
            initStarfield();

            // Update Locomotive Scroll after all images and content are loaded
            window.addEventListener('load', () => {
                locomotiveScroll.update();
            });

            // Update on window resize
            let resizeTimer;
            window.addEventListener('resize', () => {
                clearTimeout(resizeTimer);
                resizeTimer = setTimeout(() => {
                    locomotiveScroll.update();
                }, 250);
            });
        }

        // Scroll Animation Observer
        const observerOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.2
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        // Function to initialize animations
        function initAnimations() {
            // Observe all elements with scroll animation classes
            document.querySelectorAll('.scroll-fade-up, .scroll-fade-left, .scroll-fade-right, .scroll-fade-in, .facts-container, .benefits-header, .fact-card, .benefit-card, .game-banner').forEach(el => {
                observer.observe(el);
            });
        }

        // Parallax effect for orbs
        function initParallax() {
            window.addEventListener('mousemove', (e) => {
                const orbs = document.querySelectorAll('.purple-orb');
                const mouseX = e.clientX / window.innerWidth - 0.5;
                const mouseY = e.clientY / window.innerHeight - 0.5;

                orbs.forEach(orb => {
                    const speed = orb.classList.contains('orb-1') ? 30 : 20;
                    const x = mouseX * speed;
                    const y = mouseY * speed;
                    orb.style.transform = `translate3d(${x}px, ${y}px, 0)`;
                });
            });
        }

        async function loadContent(page) {
            // 1) Stylesheet für Spiele nachladen
            if (page !== 'index.html') {
                let cssPath;
                switch(page) {
                    case 'mines.html':
                        cssPath = '../assets/css/mines.css';
                        break;
                    case 'towers.html':
                        cssPath = '../assets/css/towers.css';
                        break;
                    case 'library.html':
                        cssPath = '../assets/css/library.css';
                        break;
                    default:
                        cssPath = '../assets/css/' + page.replace('.html','.css');
                }

                if (!document.getElementById(page + '-css')) {
                const link = document.createElement('link');
                link.rel = 'stylesheet';
                    link.id  = page + '-css';
                    link.href = cssPath;
                document.head.appendChild(link);
                await new Promise(r => link.onload = r);
                }
            }
            
            // 2) HTML-Fragment laden
            let pagePath;
            switch(page) {
                case 'mines.html':
                    pagePath = '../games/Mines/mines.html';
                    break;
                case 'towers.html':
                    pagePath = '../games/Towers/towers.html';
                    break;
                case 'library.html':
                    pagePath = '../games/library.html';
                    break;
                default:
                    pagePath = page;
            }

            const res = await fetch(pagePath);
            const text = await res.text();
            const doc = new DOMParser().parseFromString(text,'text/html');
            const main = doc.querySelector('main');
            document.getElementById('content').innerHTML = main.innerHTML;
            
            // 3) Initialisierung
            if (page === 'mines.html')   new MinesGame();
            if (page === 'towers.html')  new TowersGame();
            if (page === 'index.html') {
                console.log('Initializing carousel and animations…');
                initCarousel();
                initAnimations();
                initParallax();
            }
            
            // Initialize/Update Locomotive Scroll after content load
            initLocomotiveScroll();

            // 4) Active-Link aktualisieren
            document.querySelectorAll('[data-page].active')
                    .forEach(el => el.classList.remove('active'));
            document.querySelectorAll(`[data-page="${page}"]`)
                    .forEach(el => el.classList.add('active'));
        }

        // Klick-Handler
        document.body.addEventListener('click', e => {
            const a = e.target.closest('[data-page]');
            if (!a) return;
            e.preventDefault();
            const page = a.dataset.page;
            loadContent(page);
            history.pushState({page}, '', `?page=${page}`);
        });

        // Forward/Back
        window.addEventListener('popstate', e => {
            loadContent(e.state?.page || 'index.html');
        });

        // Erster Aufruf
        loadContent(new URLSearchParams(location.search).get('page') || 'index.html');

        // Sidebar-Toggle
        document.querySelector('.hamburger-btn').addEventListener('click', () => {
            document.querySelector('.sidebar').classList.toggle('expanded');
            document.querySelector('.navbar').classList.toggle('sidebar-expanded');
            document.querySelector('.main-content').classList.toggle('sidebar-expanded');
        });

        /** 2) initCarousel-Funktion **/ 
        function initCarousel() {
            // Spiele-Daten
            const games = [
                { name:'Mines',     img:'../assets/images/Mines.png',     instructions:'Place your bets and navigate through a minefield! Choose how many mines to avoid and reveal safe tiles to multiply your winnings. The fewer safe tiles you need to find, the higher your potential payout!', maxWin:'10,000×', pagePath:'mines.html' },
                { name:'Towers',    img:'../assets/images/Towers.png',    instructions:'Climb the tower of fortune! Select your path wisely through multiple levels. Each correct choice increases your multiplier, but one wrong move and it\'s game over. How high can you climb?', maxWin:'5,000×',  pagePath:'towers.html' },
                { name:'Dice',      img:'../assets/images/Dice.png',      instructions:'Coming soon! Roll the dice and test your luck in this classic game of chance.', maxWin:'1,000×',  pagePath:'dice.html' },
                { name:'Roulette',  img:'../assets/images/Roulette.png',  instructions:'Coming soon! Place your bets on the iconic wheel of fortune.', maxWin:'35×',     pagePath:'roulette.html' },
                { name:'Coin Flip', img:'../assets/images/CoinFlip.png',  instructions:'Coming soon! A simple yet thrilling game of heads or tails.', maxWin:'2×',      pagePath:'coinflip.html' },
                { name:'Plinko',    img:'../assets/images/Plinko.png',    instructions:'Coming soon! Drop the ball and watch it bounce its way to prizes.', maxWin:'1,000×',  pagePath:'plinko.html' }
            ];
            const count     = games.length;
            const stepAngle = 360 / count;
            let radius      = 400,
                rotation    = 0,
                currentGame = 0;

            // DOM‐Container sichern
            const content   = document.getElementById('content');
            const banner    = content.querySelector('.game-banner');
            const carousel3d= banner.querySelector('.carousel3d');
            const carousel  = carousel3d.querySelector('#carousel');
            const desc     = banner.querySelector('.game-description');

            function updateDesc(i) {
                const g = games[i];
                const descElement = desc;
                
                // Add fade-out class
                descElement.classList.add('fade-out');
                descElement.classList.remove('fade-in');
                
                // Wait for fade-out animation
                setTimeout(() => {
                    // Update content
                    descElement.innerHTML = `
                        <h2>${g.name}</h2>
                        <p>${g.instructions}</p>
                        <div class="game-stats">
                            <div class="max-win">${g.maxWin}</div>
                            <div class="max-win-label">Max Win</div>
                        </div>
                        <a href="../pages/auth.html" class="play-now-btn">
                            <span>Play Now</span> <i class="fas fa-play-circle"></i>
                        </a>`;
                    
                    // Force reflow
                    descElement.offsetHeight;
                    
                    // Add fade-in class
                    descElement.classList.remove('fade-out');
                    descElement.classList.add('fade-in');
                }, 300); // Match this with the fade-out transition duration
            }

            // Karten initial erzeugen
            carousel.innerHTML = '';
            games.forEach((g,i) => {
                const c = document.createElement('div');
                c.className = 'card';
                c.style.backgroundImage = `url(${g.img})`;
                c.style.transform       = `rotateY(${i*stepAngle}deg) translateZ(${radius*0.5+80}px)`;
                c.addEventListener('click', () => {
                    currentGame = i;
                    rotation    = -i*stepAngle;
                    carousel.style.transition = 'transform 0.6s ease-out';
                    carousel.style.transform  = `rotateY(${rotation}deg)`;
                    updateDesc(i);
                });
                carousel.appendChild(c);
            });

            // Prev/Next-Buttons mit endloser Rotation
            ['prev','next'].forEach(dir => {
                const btn = document.createElement('button');
                btn.className = `carousel-nav ${dir}`;
                btn.innerHTML = dir==='prev'
                    ? '<i class="fas fa-chevron-left"></i>'
                    : '<i class="fas fa-chevron-right"></i>';
                carousel3d.appendChild(btn);

                btn.addEventListener('click', () => {
                    // 1) rotation immer weiter um ±stepAngle verschieben
                    rotation += (dir==='prev' ? +stepAngle : -stepAngle);

                    // 2) Transform anwenden
                            carousel.style.transition = 'transform 0.6s ease-out';
                    carousel.style.transform  = `rotateY(${rotation}deg)`;

                    // 3) Neuen Index aus dem absoluten Winkel berechnen
                    let norm = -rotation % 360;
                    if (norm < 0) norm += 360;
                    currentGame = Math.round(norm / stepAngle) % count;

                    // 4) Beschreibung updaten
                    updateDesc(currentGame);
                });
            });

            // Erstbeschreibung
            updateDesc(0);
        }

        // Starfield initialization
        class Star {
            constructor(canvas) {
                this.canvas = canvas;
                this.reset();
            }

            reset() {
                const width = this.canvas.width;
                const height = this.canvas.height;
                
                this.x = (Math.random() - 0.5) * width * 2;
                this.y = (Math.random() - 0.5) * height * 2;
                this.z = Math.random() * 1000 + 1;
                
                this.px = this.x;
                this.py = this.y;
                this.pz = this.z;
            }

            update(baseSpeed, scrollSpeed) {
                this.pz = this.z;
                this.z -= (baseSpeed + scrollSpeed);
                
                if (this.z <= 1) {
                    this.reset();
                }
                
                this.px = this.x;
                this.py = this.y;
            }

            draw(ctx) {
                const width = this.canvas.width;
                const height = this.canvas.height;
                
                const sx = (this.x / this.z) * width + width / 2;
                const sy = (this.y / this.z) * height + height / 2;
                const px = (this.x / this.pz) * width + width / 2;
                const py = (this.y / this.pz) * height + height / 2;
                
                ctx.beginPath();
                ctx.moveTo(px, py);
                ctx.lineTo(sx, sy);
                ctx.stroke();
            }
        }

        function initStarfield() {
            const canvas = document.getElementById('starfield');
            const ctx = canvas.getContext('2d');
            
            // Get theme colors
            const style = getComputedStyle(document.documentElement);
            const colors = [
                style.getPropertyValue('--accent-purple').trim(),
                style.getPropertyValue('--accent-purple-light').trim(),
                style.getPropertyValue('--text-primary').trim(),
                style.getPropertyValue('--text-secondary').trim(),
                style.getPropertyValue('--gold').trim()
            ];
            
            // Increased star count
            const STAR_COUNT = window.matchMedia('(max-width: 768px)').matches ? 200 : 400;
            
            let stars = [];
            let scrollSpeed = 0;
            const BASE_SPEED = 3;
            
            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }
            
            function createStars() {
                stars = Array.from({ length: STAR_COUNT }, () => new Star(canvas));
            }
            
            function animate() {
                ctx.fillStyle = 'rgba(15, 15, 26, 0.15)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                stars.forEach(star => {
                    // Random color from the theme colors array
                    ctx.strokeStyle = colors[Math.floor(Math.random() * colors.length)];
                    ctx.lineWidth = Math.random() * 2 + 0.5;
                    
                    star.update(BASE_SPEED, scrollSpeed);
                    star.draw(ctx);
                });
                
                requestAnimationFrame(animate);
            }
            
            // Initialize
            resizeCanvas();
            createStars();
            animate();
            
            // Event listeners
            window.addEventListener('resize', () => {
                resizeCanvas();
                createStars();
            });
            
            // Update scroll speed from Locomotive Scroll
            if (locomotiveScroll) {
                locomotiveScroll.on('scroll', ({ scroll }) => {
                    scrollSpeed = Math.abs(scroll.speed) * 50;
                    
                    // Show/hide starfield based on scroll position
                    const heroSection = document.querySelector('.hero-banner');
                    const heroBottom = heroSection.offsetTop + heroSection.offsetHeight;
                    
                    if (scroll.y > heroBottom) {
                        canvas.classList.add('hidden');
                    } else {
                        canvas.classList.remove('hidden');
                    }
                });
            }
        }

        // Add smooth scroll handling
        document.addEventListener('DOMContentLoaded', () => {
            // Handle navigation clicks
            document.querySelectorAll('[data-scroll-to]').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = link.getAttribute('data-scroll-to');
                    const targetSection = document.getElementById(targetId);
                    
                    if (targetSection && locomotiveScroll) {
                        // Update active state
                        document.querySelectorAll('.nav-link').forEach(navLink => {
                            navLink.classList.remove('active');
                        });
                        link.classList.add('active');

                        // Scroll to section
                        locomotiveScroll.scrollTo(targetSection, {
                            offset: -100,
                            duration: 1000,
                            easing: [0.25, 0.00, 0.35, 1.00]
                        });
                    }
                });
            });

            // Update active section on scroll
            if (locomotiveScroll) {
                locomotiveScroll.on('scroll', (args) => {
                    const sections = ['hero', 'facts', 'games', 'faq'];
                    let currentSection = sections[0];

                    sections.forEach(section => {
                        const element = document.getElementById(section);
                        if (element) {
                            const rect = element.getBoundingClientRect();
                            if (rect.top <= 150 && rect.bottom >= 150) {
                                currentSection = section;
                            }
                        }
                    });

                    // Update navigation active state
                    document.querySelectorAll('.nav-link').forEach(link => {
                        const targetSection = link.getAttribute('data-scroll-to');
                        if (targetSection === currentSection) {
                            link.classList.add('active');
                        } else {
                            link.classList.remove('active');
                        }
                    });
                });
            }
        });
    </script>
</body>
</html> 