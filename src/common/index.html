<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KeepRolling</title>
    <link rel="icon" type="image/png" href="../assets/images/KeepRolling_Black.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="../assets/css/homepage.css">
</head>
<body>
    <div class="purple-orb orb-1"></div>
    <div class="purple-orb orb-2"></div>

    <nav class="navbar">
        <div class="navbar-brand">
            <a href="#" data-page="index.html" class="logo-container">
                <img src="../assets/images/KeepRolling_White.png" alt="KeepRolling" class="logo-image">
            </a>
        </div>
        <div class="navbar-nav">
            <a href="#" data-page="index.html" class="nav-link active">Home</a>
            <a href="#" data-page="mines.html" class="nav-link">Games</a>
            <a href="#" class="nav-link">How It Works</a>
            <a href="#" class="nav-link">FAQ</a>
        </div>
        <!-- Auth UI - Shown when logged out -->
        <div class="auth-buttons" id="logged-out-ui">
            <a href="#" class="btn btn-login">Log In</a>
            <a href="#" class="btn btn-signup">Sign Up Free</a>
        </div>
        <!-- User Account - Shown when logged in -->
        <div class="user-account" id="logged-in-ui" style="display: none;">
            <div class="balance-display">
                <i class="fas fa-coins"></i>
                <span class="balance-amount">$0.00</span>
                <i class="fas fa-chevron-down"></i>
            </div>
            <a href="#" class="deposit-btn">Deposit</a>
            <div class="user-controls">
                <button class="icon-btn" data-tooltip="Search">
                    <i class="fas fa-search"></i>
                </button>
                <button class="icon-btn" data-tooltip="Rewards">
                    <i class="fas fa-gift"></i>
                </button>
                <button class="icon-btn" data-tooltip="Notifications">
                    <i class="fas fa-bell"></i>
                </button>
                <div class="user-profile">
                    <div class="user-avatar" id="user-initials">DS</div>
                    <span class="user-name" id="user-name">Denis Suciu</span>
                </div>
                <a href="#" class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>
            </div>
        </div>
    </nav>

    <aside class="sidebar">
        <!-- Add hamburger button -->
        <button class="hamburger-btn">

        </button>
        
        <nav class="sidebar-nav">
            <div class="nav-section">
                <a href="#" data-page="index.html" class="nav-item">
                    <i class="fas fa-home"></i>
                    <span class="nav-text">Home</span>
                </a>
                <a href="#" data-page="mines.html" class="nav-item">
                    <i class="fas fa-gamepad"></i>
                    <span class="nav-text">Games</span>
                </a>
                <a href="#" class="nav-item">
                    <i class="fas fa-chart-line"></i>
                    <span class="nav-text">Statistics</span>
                </a>
                <a href="#" class="nav-item">
                    <i class="fas fa-users"></i>
                    <span class="nav-text">Community</span>
                </a>
            </div>

            <div class="nav-section">
                <a href="#" class="nav-item">
                    <i class="fas fa-gift"></i>
                    <span class="nav-text">Rewards</span>
                </a>
                <a href="#" class="nav-item">
                    <i class="fas fa-chart-line"></i>
                    <span class="nav-text">Live RTP</span>
                </a>
                <a href="#" class="nav-item">
                    <i class="fas fa-user-friends"></i>
                    <span class="nav-text">Refer & Earn</span>
                </a>
            </div>

            <div class="nav-section">
                <a href="#" class="nav-item">
                    <i class="fas fa-headset"></i>
                    <span class="nav-text">Live Support</span>
                </a>
                <a href="#" class="nav-item">
                    <i class="fas fa-globe"></i>
                    <span class="nav-text">English</span>
                </a>
            </div>

        </nav>
    </aside>

    <main id="content" class="main-content">
        <!-- Hero Banner -->
        <section class="hero-banner">
            <div class="hero-content animate fade-in-up">
                <h1>Experience Risk-Free Gaming</h1>
                <p>Join our simulation platform and practice your strategies:</p>
                <div class="benefits-list">
                    <div class="benefit-item animate fade-in-left delay-1">
                        <i class="fas fa-coins"></i>
                        <span>Virtual Currency to Practice</span>
                    </div>
                    <div class="benefit-item animate fade-in-left delay-2">
                        <i class="fas fa-shield-alt"></i>
                        <span>Risk-Free Environment</span>
                    </div>
                    <div class="benefit-item animate fade-in-right delay-2">
                        <i class="fas fa-chart-line"></i>
                        <span>Learn Game Strategies</span>
                    </div>
                    <div class="benefit-item animate fade-in-right delay-1">
                        <i class="fas fa-gamepad"></i>
                        <span>Real Casino Experience</span>
                    </div>
                </div>
                <div class="cta-buttons animate fade-in-up delay-3">
                    <a href="#" class="cta-button signup-cta">
                        <span>Start Playing For Fun</span>
                    </a>
                    <div class="login-text">
                        Already have an account? 
                        <a href="#" class="login-link">Log In</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Facts Section -->
        <section class="facts-section">
            <div class="facts-container scroll-fade-up">
                <div class="facts-grid">
                    <div class="fact-card">
                        <div class="fact-icon">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div class="fact-value">1,000,000</div>
                        <div class="fact-label">Virtual Credits</div>
                        <p class="fact-description">Practice with our virtual currency and experience the thrill without any risk</p>
                    </div>
                    
                    <div class="fact-card">
                        <div class="fact-icon">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <div class="fact-value">1000x</div>
                        <div class="fact-label">Max Multiplier</div>
                        <p class="fact-description">Test different strategies with high multipliers in a safe environment</p>
                    </div>
                    
                    <div class="fact-card">
                        <div class="fact-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <div class="fact-value">1M+</div>
                        <div class="fact-label">Practice Games</div>
                        <p class="fact-description">Join thousands of players learning and practicing casino games</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Benefits Section -->
        <section class="benefits-section">
            <div class="benefits-container">
                <div class="benefits-header scroll-fade-up">
                    <h2 class="benefits-title">Why Choose KeepRolling Simulator</h2>
                    <p class="benefits-subtitle">Perfect your gaming strategies in a risk-free environment</p>
                </div>
                
                <div class="benefits-grid">
                    <div class="benefit-card scroll-fade-left">
                        <div class="benefit-icon">
                            <i class="fas fa-shield-alt"></i>
                        </div>
                        <div class="benefit-content">
                            <h3 class="benefit-title">Safe Practice Environment</h3>
                            <p class="benefit-text">Learn and practice casino games without the risk of losing real money</p>
                        </div>
                    </div>
                    
                    <div class="benefit-card scroll-fade-right">
                        <div class="benefit-icon">
                            <i class="fas fa-graduation-cap"></i>
                        </div>
                        <div class="benefit-content">
                            <h3 class="benefit-title">Learn Strategies</h3>
                            <p class="benefit-text">Develop and test your gaming strategies with virtual currency</p>
                        </div>
                    </div>
                    
                    <div class="benefit-card scroll-fade-left">
                        <div class="benefit-icon">
                            <i class="fas fa-chart-bar"></i>
                        </div>
                        <div class="benefit-content">
                            <h3 class="benefit-title">Track Progress</h3>
                            <p class="benefit-text">Monitor your performance and improve your gaming skills over time</p>
                        </div>
                    </div>
                    
                    <div class="benefit-card scroll-fade-right">
                        <div class="benefit-icon">
                            <i class="fas fa-gamepad"></i>
                        </div>
                        <div class="benefit-content">
                            <h3 class="benefit-title">Realistic Experience</h3>
                            <p class="benefit-text">Enjoy the authentic casino atmosphere without financial pressure</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="game-banner scroll-fade-up">
            <div class="game-banner-container">
            <div class="carousel3d">
                <div id="carousel"></div>
                <div class="carousel-hint">
                    <i class="fas fa-mouse"></i>
                    <span>Scroll to explore games</span>
                        </div>
                    </div>
                    <div class="game-description">
                        
                </div>
            </div>
        </section>

    </main>

    <!-- Scripts -->
    <script src="../games/Mines/mines.js"></script>
    <script src="../games/Towers/towers.js"></script>
    <script src="../assets/js/carousel.js"></script>
    <script>
        // Scroll Animation Observer
        const observerOptions = {
            root: null,
            rootMargin: '0px',
            threshold: 0.2
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, observerOptions);

        // Function to initialize animations
        function initAnimations() {
            // Observe all elements with scroll animation classes
            document.querySelectorAll('.scroll-fade-up, .scroll-fade-left, .scroll-fade-right, .scroll-fade-in, .facts-container, .benefits-header, .fact-card, .benefit-card, .game-banner').forEach(el => {
                observer.observe(el);
            });
        }

        // Parallax effect for orbs
        function initParallax() {
            window.addEventListener('mousemove', (e) => {
                const orbs = document.querySelectorAll('.purple-orb');
                const mouseX = e.clientX / window.innerWidth - 0.5;
                const mouseY = e.clientY / window.innerHeight - 0.5;

                orbs.forEach(orb => {
                    const speed = orb.classList.contains('orb-1') ? 30 : 20;
                    const x = mouseX * speed;
                    const y = mouseY * speed;
                    orb.style.transform = `translate3d(${x}px, ${y}px, 0)`;
                });
            });
        }

        async function loadContent(page) {
            // 1) Stylesheet für Spiele nachladen
            if (page !== 'index.html' && !document.getElementById(page + '-css')) {
                const link = document.createElement('link');
                link.rel = 'stylesheet';
                link.id  = page + '-css';
                link.href= '../assets/css/' + page.replace('.html','.css');
                document.head.appendChild(link);
                await new Promise(r => link.onload = r);
            }
            
            // 2) HTML-Fragment laden
            const res = await fetch(page);
            const text= await res.text();
            const doc = new DOMParser().parseFromString(text,'text/html');
            const main= doc.querySelector('main');
            document.getElementById('content').innerHTML = main.innerHTML;
            
            // 3) Initialisierung
            if (page === 'mines.html')   new MinesGame();
            if (page === 'towers.html')  new TowersGame();
            if (page === 'index.html') {
                console.log('Initializing carousel and animations…');
                initCarousel();
                initAnimations();
                initParallax();
            }

            // 4) Active-Link aktualisieren
            document.querySelectorAll('[data-page].active')
                    .forEach(el => el.classList.remove('active'));
            document.querySelectorAll(`[data-page="${page}"]`)
                    .forEach(el => el.classList.add('active'));
        }

        // Klick-Handler
        document.body.addEventListener('click', e => {
            const a = e.target.closest('[data-page]');
            if (!a) return;
            e.preventDefault();
            const page = a.dataset.page;
            loadContent(page);
            history.pushState({page}, '', `?page=${page}`);
        });

        // Forward/Back
        window.addEventListener('popstate', e => {
            loadContent(e.state?.page || 'index.html');
        });

        // Erster Aufruf
        loadContent(new URLSearchParams(location.search).get('page') || 'index.html');

        // Sidebar-Toggle
        document.querySelector('.hamburger-btn').addEventListener('click', () => {
            document.querySelector('.sidebar').classList.toggle('expanded');
            document.querySelector('.navbar').classList.toggle('sidebar-expanded');
            document.querySelector('.main-content').classList.toggle('sidebar-expanded');
        });

        /** 2) initCarousel-Funktion **/ 
        function initCarousel() {
            // Spiele-Daten
            const games = [
                { name:'Mines',     img:'../assets/images/Mines.png',     instructions:'Place your bets and navigate through a minefield! Choose how many mines to avoid and reveal safe tiles to multiply your winnings. The fewer safe tiles you need to find, the higher your potential payout!', maxWin:'10,000×', pagePath:'mines.html' },
                { name:'Towers',    img:'../assets/images/Towers.png',    instructions:'Climb the tower of fortune! Select your path wisely through multiple levels. Each correct choice increases your multiplier, but one wrong move and it\'s game over. How high can you climb?', maxWin:'5,000×',  pagePath:'towers.html' },
                { name:'Dice',      img:'../assets/images/Dice.png',      instructions:'Coming soon! Roll the dice and test your luck in this classic game of chance.', maxWin:'1,000×',  pagePath:'dice.html' },
                { name:'Roulette',  img:'../assets/images/Roulette.png',  instructions:'Coming soon! Place your bets on the iconic wheel of fortune.', maxWin:'35×',     pagePath:'roulette.html' },
                { name:'Coin Flip', img:'../assets/images/CoinFlip.png',  instructions:'Coming soon! A simple yet thrilling game of heads or tails.', maxWin:'2×',      pagePath:'coinflip.html' },
                { name:'Plinko',    img:'../assets/images/Plinko.png',    instructions:'Coming soon! Drop the ball and watch it bounce its way to prizes.', maxWin:'1,000×',  pagePath:'plinko.html' }
            ];
            const count     = games.length;
            const stepAngle = 360 / count;
            let radius      = 400,
                rotation    = 0,
                velocity    = 0,
                snapping    = false,
                currentGame = 0,
                friction    = 0.95,
                minVel      = 0.2;

            // DOM‐Container sichern
            const content   = document.getElementById('content');
            const banner    = content.querySelector('.game-banner');
            const carousel3d= banner.querySelector('.carousel3d');
            const carousel  = carousel3d.querySelector('#carousel');
            const desc     = banner.querySelector('.game-description');

            function updateDesc(i) {
                const g = games[i];
                desc.innerHTML = `
                    <h2>${g.name}</h2>
                    <p>${g.instructions}</p>
                    <div class="game-stats">
                        <div class="max-win">${g.maxWin}</div>
                        <div class="max-win-label">Max Win</div>
                    </div>
                    <a href="#" data-page="${g.pagePath}" class="play-now-btn">
                        <span>Play Now</span> <i class="fas fa-play-circle"></i>
                    </a>`;
            }

            // Karten initial erzeugen
            carousel.innerHTML = '';
            games.forEach((g,i) => {
                const c = document.createElement('div');
                c.className = 'card';
                c.style.backgroundImage = `url(${g.img})`;
                c.style.transform       = `rotateY(${i*stepAngle}deg) translateZ(${radius*0.5+80}px)`;
                c.addEventListener('click', () => {
                    currentGame = i;
                    rotation    = -i*stepAngle;
                    velocity    = 0;
                    carousel.style.transition = 'transform 0.6s ease-out';
                    carousel.style.transform  = `rotateY(${rotation}deg)`;
                    updateDesc(i);
                });
                carousel.appendChild(c);
            });

            // === NEU: Prev/Next-Buttons mit endloser Rotation ===
            ['prev','next'].forEach(dir => {
                const btn = document.createElement('button');
                btn.className = `carousel-nav ${dir}`;
                btn.innerHTML = dir==='prev'
                    ? '<i class="fas fa-chevron-left"></i>'
                    : '<i class="fas fa-chevron-right"></i>';
                carousel3d.appendChild(btn);

                btn.addEventListener('click', () => {
                    // 1) rotation immer weiter um ±stepAngle verschieben
                    rotation += (dir==='prev' ? +stepAngle : -stepAngle);

                    // 2) Transform anwenden
                    carousel.style.transition = 'transform 0.6s ease-out';
                    carousel.style.transform  = `rotateY(${rotation}deg)`;
                    velocity = 0;

                    // 3) Neuen Index aus dem absoluten Winkel berechnen
                    let norm = -rotation % 360;
                    if (norm < 0) norm += 360;
                    currentGame = Math.round(norm / stepAngle) % count;

                    // 4) Beschreibung updaten
                    updateDesc(currentGame);
                });
            });

            // Wheel-Handling
            carousel3d.addEventListener('wheel', e => {
                e.preventDefault();
                if (!snapping) velocity += e.deltaY * 0.02;
            }, { passive:false });

            // Animation‐Loop mit Snapping
            function animate() {
                if (!snapping && Math.abs(velocity) > 0.001) {
                        rotation += velocity;
                        carousel.style.transform = `rotateY(${rotation}deg)`;
                        velocity *= friction;

                    // aktuellen Index ermitteln
                    let norm = -rotation % 360;
                    if (norm < 0) norm += 360;
                    const idx = Math.round(norm / stepAngle) % count;
                    if (idx !== currentGame) {
                        currentGame = idx;
                        updateDesc(idx);
                    }

                    // snapping …
                        if (Math.abs(velocity) < minVel) {
                            snapping = true;
                            const target = Math.round(rotation/stepAngle)*stepAngle;
                        rotation = target;
                            carousel.style.transition = 'transform 0.6s ease-out';
                            carousel.style.transform  = `rotateY(${target}deg)`;
                            velocity = 0;
                            carousel.addEventListener('transitionend', () => {
                                carousel.style.transition = '';
                                snapping = false;
                            }, { once:true });
                    }
                }
                requestAnimationFrame(animate);
            }
            animate();

            // Erstbeschreibung
            updateDesc(0);
        }
    </script>
</body>
</html> 